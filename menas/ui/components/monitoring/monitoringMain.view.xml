<!--
  ~ Copyright 2018-2019 ABSA Group Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<core:View id="monitoringMainView" controllerName="components.monitoring.monitoringMain"
           xmlns="sap.m"
           xmlns:core="sap.ui.core"
           xmlns:mvc="sap.ui.core.mvc"
           xmlns:layout="sap.ui.layout"
           xmlns:u="sap.ui.unified"
           xmlns:form="sap.ui.layout.form"
           xmlns:table="sap.ui.table"
		   xmlns:cust="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
		   xmlns:html="http://www.w3.org/1999/xhtml"
           xmlns:lab="it.designfuture.chartjs"
           class="viewPadding">
	<Page title="Monitoring" enableScrolling="true">
		<customHeader>
			<Bar>
				<contentMiddle>
					<Title text="Monitoring"/>
				</contentMiddle>
				<contentRight>
					<Text text="Logged in as:"/>
					<Text text="{/userInfo/username}"/>
					<Button id="logout" icon="sap-icon://log" press="GenericService.logout"/>
				</contentRight>
			</Bar>
		</customHeader>
		<content>
			<SplitContainer>
				<masterPages>
					<Page showHeader="false">
						<content>
							<List items="{/datasets}" mode="SingleSelectMaster" selectionChange="datasetSelected">
								<StandardListItem title="{_id}" description="latest version: {latestVersion}" cust:id="{_id}" type="Active">
								</StandardListItem>
							</List>
						</content>
						<footer>

						</footer>
					</Page>
				</masterPages>
				<detailPages>
					<Page>
						<customHeader>
							<Bar>
								<contentLeft>
									<Title text="{/currentDataset/name}" />
								</contentLeft>
							</Bar>
						</customHeader>
                            <content>
                                <u:Calendar
                                    id="calendar"
                                    select="handleCalendarSelect"
                                    intervalSelection="true"
                                    weekNumberSelect="handleWeekNumberSelect"/>
                                <layout:HorizontalLayout>
                                    <Label
                                        text="Selected From:"
                                        class="labelMarginLeft" />
                                    <Text
                                        id="selectedDateFrom"
                                        text="No Date Selected"
                                        class="labelMarginLeft"/>
                                </layout:HorizontalLayout>
                                <layout:HorizontalLayout>
                                    <Label
                                        text=" To:"
                                        class="labelMarginLeft" />
                                    <Text
                                        id="selectedDateTo"
                                        text="No Date Selected"
                                        class="labelMarginLeft"/>
                                </layout:HorizontalLayout>

                                <lab:BarChartJS
                                    id="bar_chart"
                                    datasets="{/plotData/datasets}"
                                    labels="{/plotData/labels}"
                                    titleDisplay="true"
                                    titleText="Number of records"
                                    onLegendItemClick="onLegendItemClick"
                                    onLegendItemHover="onLegendItemHover"
                                    onClick="onClick"
                                    onHover="onHover"
                                    tooltipEnabled="true"
                                    onAnimationProgress="onAnimationProgress"
                                    onAnimationComplete="onAnimationComplete"
                                    isHorizontal="true">
                                </lab:BarChartJS>
                                <List items="{/monitoringPoints}" mode="SingleSelectMaster">
                                    <StandardListItem title="{informationDate}_v{reportVersion}" description="status: {status}"
                                     info = "RAW: {raw_recordcount} STD: {std_records_succeeded}/{std_records_failed} CNFRM: {conform_records_succeeded}/{conform_records_failed}" cust:id="{informationDate}_v{reportVersion}" type="Active">
                                    </StandardListItem>
                                </List>
                                <Bar>
                                <contentMiddle>
                                    <Title text="Checkpoints"/>
                                </contentMiddle>
                                </Bar>
                                <TileContainer
                                    id="checkpoint_container"
                                    tiles="{/checkpoints}">
                                    <StandardTile
                                        type="Monitor"
                                        number="{informationDate}"
                                        numberUnit="v{reportVersion}"
                                        title="{processEndTime} "
                                        info="{checkpointName}"
                                        infoState="Success" />
                                </TileContainer>
                            </content>
						<footer>
						</footer>
					</Page>
				</detailPages>
			</SplitContainer>
		</content>
	</Page>
</core:View>
